import{config}from'../config/config.js';import{AuthService}from'./auth.js';export class API{static async request(endpoint,options={}){const token=AuthService.getToken();const headers={'Content-Type':'application/json',...options.headers};if(token)headers['Authorization']=`Bearer ${token}`;const res=await fetch(`${config.apiUrl}${endpoint}`,{...options,headers});if(!res.ok)throw new Error(`API Error: ${res.status}`);return res.json()}static get(endpoint){return this.request(endpoint)}static post(endpoint,data){return this.request(endpoint,{method:'POST',body:JSON.stringify(data)})}static async getLobbies(){return this.get('/lobby/list')}static async createLobby(data){return this.post('/lobby/create',data)}static async joinLobby(lobbyId,password){return this.post(`/lobby/${lobbyId}/join`,{password})}}
